\section{Mealy equations}

Although we have now left operational semantics behind in the previous chapter,
the notion of Mealy form will come in very handy for defining a sound and
complete algebraic semantics.
We could just naively port across the Mealy rules by changing the squiggly arrow
into an equals sign and hoping nobody notices, but we are better people than
that.
Instead we will show how Mealy form can be derived using a finite set of
equations, rather than resorting to equations parameterised over all circuits.

\input{sections/circuits/algebraic/floats/mealy-equations}

\begin{definition}
Let \(\mealyequations\) be the set of equations in \cref{fig:mealy-equations}.
\end{definition}

\begin{proposition}
    Given a sequential circuit \(
        \iltikzfig{strings/category/f}[box=F,colour=seq]
    \), there exists a circuit in Mealy form such that \(
        \iltikzfig{strings/category/f}[box=F,colour=seq]
        =
        \iltikzfig{circuits/productivity/mealy-form}
    \) in \(\scircsigma / \mealyequations\).
\end{proposition}
\begin{proof}
    Any circuit can be assembled into global trace-delay form solely using the
    axioms of STMCs, which hold by default in \(\scircsigma\).
    From this, a circuit in pre-Mealy form can be obtained by translating
    delays into registers using \(
        \iltikzfig{circuits/axioms/delay-to-register/step-0}
        \eqaxioms[(\monoidunitleqn)]
        \iltikzfig{circuits/axioms/delay-to-register/step-1}
    \) and translating values into registers using \(
        \iltikzfig{circuits/axioms/value-to-register/step-0}
        \eqaxioms[(\monoidunitreqn)]
        \iltikzfig{circuits/axioms/value-to-register/step-1}
        \eqaxioms[(\bottomdelayeqn)]
        \iltikzfig{circuits/axioms/value-to-register/step-2}
    \).
    Subsequently a circuit in Mealy form can be obtained by applying the
    \((\instantfeedback)\).
\end{proof}