\section{Restriction equations}\label{sec:restriction}

We can now map the state set of one circuit to another using encodings.
Does this mean that the two circuits will now be structurally equal?
Unfortunately not: all it means is that the circuits agree on the set of
circuit states.

\begin{example}\label{ex:restriction-example}
    Consider the following two circuits in \(\scirc{\belnapsignature}\): \[
        \iltikzfig{circuits/examples/state-change/circuit-mealy}
        \quad
        \iltikzfig{circuits/examples/state-change/circuit-simpler-mealy}
    \]
    Both circuits have circuit states \(\{\belnaptrue\belnapfalse\}\), but their
    combinational cores do \emph{not} have the same semantics.
    They only act the same because they receive certain inputs.
\end{example}

The final family of equations required is one for mapping between combinational
circuits that agree on the subset of possible inputs they actually receive.

\begin{notation}
    Given sets \(A\), \(B\) and \(C\) where \(C \subseteq A\) and a function
    \(\morph{f}{A}{B}\), the \emph{restriction of \(f\) to \(C\)} is a function
    \(\morph{f|C}{C}{B}\), defined as \(f|C(c) \coloneqq f(c)\).
\end{notation}

\begin{definition}[Restriction equations]
    Let the schema of \emph{restriction equations} be defined as in
    \cref{fig:restriction-equation}.
\end{definition}

\begin{example}
    By a restriction equation, the circuits in \cref{ex:restriction-example} are
    now equal, as the cores produce equal outputs for inputs where the state is
    \(\belnaptrue\belnapfalse\).
\end{example}
\input{sections/semantics/algebraic/floats/restriction-equation}