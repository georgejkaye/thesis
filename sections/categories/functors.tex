\section{Functors}\label{sec:functors}

It is actually quite rare that we are only making use of one category at a time.
In order to compare categories, we need a notion of \emph{mapping between} them.
A class of maps that enjoy some useful properties are known as \emph{functors}.

\begin{definition}[Functor]
    Given two categories \(\mcc\) and \(\mcd\), a \emph{functor} \(
    \morph{F}{\mcc}{\mcd}
    \) maps objects and morphisms in \(\mcc\) to objects and morphisms in
    \(\mcd\) such that
    \begin{itemize}
        \item \(F(\id[A]) = \id[FA]\) for every \(A \in \ob{\mcc})\); and
        \item \(F(g \circ f) = F(g) \circ F(f)\) for every \(\morph{f}{A}{B}\)
              and \(\morph{g}{B}{C}\).
    \end{itemize}
\end{definition}

A functor \(F\) maps an object \(X\) in one category to an object \(FX\) in
another, and morphisms \(\morph{f}{X}{Y}\) to \(\morph{Ff}{FX}{FY}\).
The two equations are known as the \emph{functoriality} equations; if a map
satisfies these it is \emph{functorial} i.e.\ it is a functor.

Functors have a graphical representation as `functorial
boxes'~\cite{mellies2006functorial}; applying a functor \(\morph{F}{\mcc}{\mcd}\)
to a morphism \(\morph{f}{X}{Y}\) is drawn as
\[
    \iltikzfig{strings/category/functors/f}[box=f,functor=F,colour=white,dom=X,cod=Y]
\]
As always, the wire labels are optional and will be omitted if unambiguous.
The functoriality equations are represented as in
\cref{fig:functoriality-equations}.

\input{floats/functoriality-equations}

\begin{definition}[Endofunctor]
    An \emph{endofunctor} on category \(\mcc\) is a functor \(\mcc \to \mcc\).
\end{definition}

\subsection{Examples of functors}

Many notions in mathematics and computer science can be viewed as functors.

\begin{example}[Powerset functor]
    The notion of powerset can be interpreted as an endofunctor \(
    \morph{\powerset}{\set}{\set}
    \), mapping a set \(X\) to its powerset \(\powerset(X)\) and a morphism
    \(\morph{f}{X}{Y}\) to the function \(\powerset(X) \to \powerset(Y)\) which
    applies \(f\) pointwise.
\end{example}

\begin{example}[List functor]\label{ex:list-functor}
    A functor that crops up frequently in computer science is the
    \emph{list functor} \(\morph{\listf}{\set}{\set}\), which sends a set
    \(X\) to its set of lists \(\freemon{X}\), and sends a function
    \(\morph{f}{X}{Y}\) to the function
    \(\morph{\freemon{f}}{\freemon{X}}{\freemon{Y}}\): which applies \(f\)
    to each element of a list.
\end{example}

\begin{example}[Free monoid]\label{ex:free-monoid}
    When talking about a mathematical structure, there is often a notion
    of its \emph{free construction}, which can be viewed as the most
    `bare-bones' version.
    For example, the set of lists \(\freemon{X}\) is the carrier of the
    \emph{free monoid} on \(X\).
    This means there is a functor \(\morph{F}{\set}{\mon}\) (the
    \emph{free functor}) that acts on objects as \(
    X \mapsto (\freemon{X}, \concat, [])
    \) and sends morphisms \(X \to Y\) to the corresponding monoid homomorphism
    \(\freemon{X} \to \freemon{Y}\).

    There is also a \emph{forgetful} or \emph{underlying} functor
    \(\morph{U}{\mon}{\set}\) which sends a monoid \((X, *, e)\) to its carrier
    set \(X\) and `forgets' the monoid structure.
    These functors form a relationship known as an \emph{adjunction}, but this
    is beyond the scope of this thesis.
\end{example}

\subsection{Properties of functors}

Functors can also have useful properties.

\begin{notation}
    Given a functor \(\morph{F}{\mcc}{\mcd}\), let \(
    \morph{F_{A,B}}{\mor{\mcc}{A}{B}}{\mor{\mcd}{FA}{FB}}
    \) be the induced map sending classes of morphisms \(A \to B\) in \(\mcc\)
    to the classes of morphisms \(FA \to FB\) in \(\mcd\).
\end{notation}

\begin{definition}[Faithful functor~\cite{maclane1978categories}]
    A functor \(\morph{F}{\mcc}{\mcd}\) is \emph{faithful} if \(F_{A,B}\) is
    injective for all \(A,B \in \mcc\).
\end{definition}

A faithful functor \(\morph{F}{\mcc}{\mcd}\) does not coalesce morphisms: every
morphism \(f \in \mor{\mcc}{A}{B}\) has a unique morphism
\(Ff \in \mor{\mcd}{FA}{FB}\).

\begin{definition}[Full functor~\cite{maclane1978categories}]
    A functor \(\morph{F}{\mcc}{\mcd}\) is \emph{full} if \(F_{A,B}\) is
    surjective for all \(A,B \in \mcc\).
\end{definition}

Every morphism \(FA \to FB\) is in the image of a full functor.

\begin{definition}[Fully faithful functor~\cite{maclane1978categories}]
    A functor \(\morph{F}{\mcc}{\mcd}\) is \emph{fully faithful} if \(F_{A,B}\)
    is bijective; i.e.\ the functor is full and faithful.
\end{definition}

\begin{example}
    Consider the categories \(\set\) and \(\mon\), and the forgetful functor
    \(\morph{F}{\set}{\mon}\) and \(\morph{U}{\mon}{\set}\).
    \(U\) is faithful as monoid homomorphisms are just functions, but it is not
    full as not all functions are monoid homomorphisms.
    Note that even though \(U\) is faithful, it is not injective on objects
    because there may be many monoids with the same carrier set.
\end{example}

\subsection{Functors as morphisms}

Although it is possible to view functors purely as a standalone concept, the
core tenet of category theory is to view everything in terms of morphisms, and
functors are no different.

\begin{example}[Identity functor]
    A trivial endofunctor for any category \(\mcc\) is the
    \emph{identity functor} \(\morph{\idf}{\mcc}{\mcc}\) which acts as the
    identity on objects and morphisms.
\end{example}

\begin{example}[Functor composition]
    If \(\morph{F}{\mcc}{\mcd}\) and \(\morph{G}{\mcc}{\mcd}\) are functors
    then their composite \(\morph{G \circ F}{\mcc}{\mcd}\) is also a functor.
\end{example}

Identity and (associative) composition are all we need to define a category!

\begin{definition}
    A category \(\mcc\) is \emph{small} if \(\ob{\mcc}\) and
    \(\mor{\mcc}{A}{B}\) are sets.
\end{definition}

\begin{example}[Category of categories]
    \(\cat\) is the category in which \(\ob{\cat}\) are small categories and
    \(\mor{\cat}{\mcc}{\mcd}\) contains functors \(\mcc \to \mcd\).
    Identity is the identity functor, and composition is function composition.
\end{example}

\section{Universal constructions through functors}

Previously we defined some \emph{universal constructions} such as initial
objects and pullbacks.
Using functors, these universal constructions can be viewed as special cases of
even more abstract notions: \emph{limits} and \emph{colimits}.

\begin{definition}[Cone]
    Let \(\mathcal{J}\) and \(\mathcal{C}\) be categories, and let
    \(\morph{F}{\mathcal{J}}{\mathcal{C}}\) be a functor.
    A \emph{cone to \(F\)} is an object \(N \in \mathcal{C}\) equipped with
    a family of morphisms \(\morph{\phi_X}{N}{FX}\) for each
    \(X \in \mathcal{J}\), such that for each
    \(\morph{f}{X}{Y} \in \mathcal{J}\),
    \(Ff \circ \phi_X = \phi_Y\).
    \begin{center}
        \includestandalone{figures/category/diagrams/cone}
    \end{center}
\end{definition}

The limit is the `best possible cone'.

\begin{definition}[Limit]
    Let \(\mathcal{J}\) and \(\mathcal{C}\) be categories, and let
    \(\morph{F}{\mathcal{J}}{\mathcal{C}}\) be a functor.
    The \emph{limit of \(F\)} is a cone to \(F\) \((L,\phi) \)such that for
    every other cone to \(F\) \((N, \psi)\), there exists a unique morphism
    \(\morph{u}{N}{L}\) such that \(\phi_X \circ u = \psi_X\) for all
    \(X \in \mathcal{J}\).
    \begin{center}
        \includestandalone{figures/category/diagrams/limit}
    \end{center}
\end{definition}

Limits generalise several of the universal constructions we have encountered so
far.

\begin{example}[Terminal object]\label{ex:terminal-limit}
    When the category \(\mathcal{J}\) is the empty category, the only functor
    \(\morph{F}{\mathcal{J}}{\mathcal{C}}\) is the empty functor.
    Since there are no objects in \(\mathcal{J}\), a cone of \(F\) is just an
    object \(C\), so the limit of \(F\) is an object \(L\) to which there is a
    unique morphism \(C \to L\); the terminal object.
\end{example}

\begin{example}[Products]\label{ex:product-limit}
    When the category \(\mathcal{J}\) has objects but no morphisms other than
    identities, a functor \(\morph{F}{\mathcal{J}}{\mathcal{C}}\) is one that
    indexes objects of \(\mathcal{C}\) by objects in \(\mathcal{J}\).
    A cone of \(F\) is an object \(N\) with morphisms that pick each of these
    indexed elements, so the limit of \(F\) is the product.
\end{example}

\begin{example}[Pullbacks]\label{ex:pullback-limit}
    Let \(\mathcal{J}\) be a category containing three objects \(A\), \(B\),
    \(C\) with non-identity morphisms \(B \to A\) and \(C \to A\).
    A cone of \(\morph{F}{\mathcal{J}}{\mathcal{C}}\) is an object \(N\) and
    morphisms \(N \to FA\), \(N \to FB\) and \(N \to FC\), so the limit of
    \(F\) is the pullback.
\end{example}

Since limits define so many categorical structures, the ability to define
arbitrary limits in a category makes it a much more appealing setting to work
in.

\begin{definition}
    For a small category \(\mathcal{J}\), a category \(\mathcal{C}\)
    \emph{has limits of shape \(\mathcal{J}\)} if every functor
    \(\morph{F}{\mathcal{J}}{\mathcal{C}}\) has a limit in \(\mathcal{C}\).
\end{definition}

\begin{definition}[Complete category]
    A category \(\mathcal{C}\) is \emph{complete} if it has limits for all
    functors \(\morph{F}{\mathcal{J}}{\mathcal{C}}\), where \(\mathcal{J}\) is a
    small category.
\end{definition}

Limits do not generalise all the universal constructions we have seen so far;
for the rest we must flip the arrows and consider the dual version.

\begin{definition}[Cocone]
    Let \(\mathcal{J}\) and \(\mathcal{C}\) be categories, and let
    \(\morph{F}{\mathcal{J}}{\mathcal{C}}\) be a functor.
    A \emph{cocone to \(F\)} is an object \(N \in \mathcal{C}\) equipped with
    a family of morphisms \(\morph{\phi_X}{FX}{N}\) for each
    \(X \in \mathcal{J}\), such that for each
    \(\morph{f}{X}{Y} \in \mathcal{J}\),
    \(\phi_Y \circ Ff = \phi_X\).
    \begin{center}
        \includestandalone{figures/category/diagrams/cocone}
    \end{center}
\end{definition}

\begin{definition}[Limit]
    Let \(\mathcal{J}\) and \(\mathcal{C}\) be categories, and let
    \(\morph{F}{\mathcal{J}}{\mathcal{C}}\) be a functor.
    The \emph{colimit of \(F\)} is a cocone to \(F\) \((L,\phi)\) such that for
    every other cocone to \(F\) \((N, \psi)\), there exists a unique morphism
    \(\morph{u}{L}{N}\) such that \(u \circ \phi_X = \psi_X\) for all
    \(X \in \mathcal{J}\).
    \begin{center}
        \includestandalone{figures/category/diagrams/colimit}
    \end{center}
\end{definition}

\begin{example}
    By using the reasoning in
    \cref{ex:terminal-limit,ex:product-limit,ex:pullback-limit} and reversing
    the arrows, it is straightforward to see that initial objects, coproducts,
    and pushouts are examples of colimits.
\end{example}

\begin{definition}
    For a small category \(\mathcal{J}\), a category \(\mathcal{C}\)
    \emph{has colimits of shape \(\mathcal{J}\)} if every functor
    \(\morph{F}{\mathcal{J}}{\mathcal{C}}\) has a colimit in \(\mathcal{C}\).
\end{definition}

\begin{definition}[Cocomplete category]
    A category \(\mathcal{C}\) is \emph{cocomplete} if it has colimits for all
    functors \(\morph{F}{\mathcal{J}}{\mathcal{C}}\), where \(\mathcal{J}\) is a
    small category.
\end{definition}

It is often the case that we are interested in functors that \emph{preserve}
structure, so we can exploit it in both categories.
Since a lot of structure can be expressed in terms of limits or colimits, this
can be expressed succinctly by saying that a functor merely preserves these
limits or colimits.

\begin{definition}
    A functor \(\morph{F}{\mcc}{\mcd}\) \emph{preserves all (co)limits} if
    \((FL,F\phi)\) is a (co)limit whenever \((L,\phi)\) is a (co)limit.
\end{definition}

Sometimes a functor may not preserve \emph{all} (co)limits but only some of
them.
For example, we may talk about \(F\) being a coproduct-preserving functor .
This is defined in the same way as above: \(F(A+B)\) must itself a coproduct
\(FA + FB\).