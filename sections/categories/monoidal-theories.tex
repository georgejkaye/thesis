\section{Monoidal theories}

So far we have only concerned ourselves with \emph{structural} equations:
equations that show how the same term can be constructed using different
combinations of composition, tensor, the identity and symmetry.
However, these only serve as a form of housekeeping: the true `computational
content' of processes comes from equations that show how the generators interact
with \emph{each other}.
These equations are provided by a \emph{monoidal theory}.

\begin{definition}[Monoidal theory]
    A \emph{monoidal theory} is a tuple \((\generators, \equations)\) where
    \(\generators\) is a set of generators and \(\equations\) is a set of
    equations.
\end{definition}

An equation \(f = g\) in a monoidal theory \emph{identifies} the two morphisms
\(f\) and \(g\).
When reasoning with a monoidal theory, we therefore need to work in a category
in which all of the equations are identified in this way.

\begin{definition}[Quotient category]
    Given a category \(\mcc\) and a set of equations \(\mce\) between
    morphisms in \(\mcc\) with the same source and target, the
    \emph{quotient category} \(\mcc / \mce\) is the category in which
    \(\ob{\mcc / \mce} \coloneqq \ob{\mcc}\) and \(
    \mor{(\mcc / \mce)}{X}{Y}
    \coloneqq
    \mor{\mcc}{X}{Y} / \mce
    \).
\end{definition}

In a quotient category \(\mcc / \mce\) the morphisms are the
\emph{equivalence classes} of morphisms in \(\mcc\) modulo the equations in
\(\mce\).

\begin{definition}
    Given a monoidal theory \((\generators, \equations)\), let
    \(\smc{\generators, \equations} \coloneqq \smc{\generators} / \equations\).
\end{definition}

When the set of equations \(\equations\) is empty,
\(\smc{\generators, \emptyset} = \smc{\generators}\), and we recover an ordinary
PROP.

\subsection{Case study: commutative monoids}

Monoidal theories can be used to reason with many structures in mathematics.
One such structure is that of \emph{commutative monoids}.

\begin{definition}[Commutative monoids]\label{def:commutative-monoid}
    The monoidal theory of
    \emph{commutative monoids} is \(
    (\generators[\cmon], \equations[\cmon])
    \), where \(
    \generators[\cmon] \coloneqq \{
    \iltikzfig{strings/structure/monoid/merge}[colour=white],
    \iltikzfig{strings/structure/monoid/init}[colour=white]
    \}
    \) called the \emph{multiplication} and the \emph{unit} respectively,
    and \(\equations[\frob]\) comprises the equations
    \begin{gather*}
        \iltikzfig{strings/structure/monoid/unitality-l-lhs}
        =
        \iltikzfig{strings/structure/monoid/unitality-l-rhs}
        \quad
        \text{(left unitality)}
        \qquad
        \iltikzfig{strings/structure/monoid/associativity-lhs}
        =
        \iltikzfig{strings/structure/monoid/associativity-rhs}
        \quad
        \text{(associativity)}
        \\[0.5em]
        \iltikzfig{strings/structure/monoid/commutativity-lhs}
        =
        \iltikzfig{strings/structure/monoid/commutativity-rhs}
        \quad
        \text{(commutativity)}
    \end{gather*}
    We write \(\cmon \coloneqq \smc{\generators[\cmon], \equations[\cmon]}\).
\end{definition}

The equations describe the properties of the multiplication: it is unital with
respect to the unit; it is associative; and it is commutative.
These equations could be described textually, but the string diagrams provide
intuitive visual interpretations; often it is insightful to reason
\emph{diagrammatically}.

\begin{example}[Right unitality]
    \(
    \iltikzfig{strings/structure/monoid/unitality-r-lhs}
    =
    \iltikzfig{strings/structure/monoid/unitality-r-rhs}
    \) is a valid equation in \(\cmon\).
\end{example}
\begin{proof}
    \(
    \iltikzfig{strings/structure/monoid/unitality-r-lhs}
    \eqaxioms[(\dagger)]
    \iltikzfig{strings/structure/monoid/right-unitality/step-1}
    =
    \iltikzfig{strings/structure/monoid/unitality-l-lhs}
    =
    \iltikzfig{strings/structure/monoid/unitality-l-rhs}
    \)
\end{proof}

Note that the first step \((\dagger)\) of the proof is performed solely by
deforming the string diagram; this is permitted so long as connectivity is
preserved.
Deforming the string diagram corresponds to implicitly applying equations
of symmetric monoidal categories.
These explicit steps are shown below, with the unit wire in grey:
%
\begin{gather*}
    \iltikzfig{strings/structure/monoid/right-unitality/lhs-unit}
    \eqaxioms[\text{unitality of } \seq]
    \iltikzfig{strings/structure/monoid/right-unitality/step-1-1}
    \eqaxioms[\text{self-inverse}]
    \iltikzfig{strings/structure/monoid/right-unitality/step-1-2}
    \\[0.5em]
    \eqaxioms[\text{naturality of } \sigma]
    \iltikzfig{strings/structure/monoid/right-unitality/step-1-3}
    \eqaxioms[\text{unitality of } \sigma]
    \iltikzfig{strings/structure/monoid/right-unitality/step-1-4}
    \eqaxioms[\text{unitality of } \seq]
    \iltikzfig{strings/structure/monoid/right-unitality/step-1-5}
\end{gather*}
%
Already much more verbose than the simple deformation, this does not
even take into account the repeated applications of associativity of both
composition and tensor required if reasoning in the term language.
If we write \(
\iltikzfig{strings/structure/monoid/merge}[colour=white]
\) as \(\mu\) and \(
\iltikzfig{strings/structure/monoid/init}[colour=white]
\) as \(\eta\), then the proof on terms becomes:
\begin{align*}
    \id[n] \tensor \eta \seq \mu
     & =
    \id[n] \tensor (\eta \seq \id[n]) \seq \mu
     &
    \text{unitality of } \seq
    \\
     & =
    (\id[n] \seq \id[n]) \tensor (\eta \seq \id[n]) \seq \mu
     &
    \text{unitality of } \seq
    \\
     & =
    ((\id[n] \tensor \eta) \seq (\id[n] \tensor \id[n])) \seq \mu
     &
    \text{functoriality of } \tensor
    \\
     & =
    ((\id[n] \tensor \eta) \seq (\swap{n}{n} \seq \swap{n}{n})) \seq \mu
     &
    \sigma \text{ is self inverse}
    \\
     & =
    (((\id[n] \tensor \eta) \seq \swap{n}{n}) \seq \swap{n}{n}) \seq \mu
     &
    \text{associativity of } \seq
    \\
     & =
    ((\swap{\varepsilon}{n} \seq (\eta \tensor \id[n])) \seq \swap{n}{n}) \seq \mu
     &
    \text{naturality of } \sigma
    \\
     & =
    ((\id[n] \seq (\eta \tensor \id[n])) \seq \swap{n}{n}) \seq \mu
     &
    \text{unitality of } \sigma
    \\
     & =
    ((\eta \tensor \id[n]) \seq \swap{n}{n}) \seq \mu
     &
    \text{unitality of } \seq
    \\
     & =
    (\eta \tensor \id[n]) \seq (\swap{n}{n} \seq \mu)
     &
    \text{associativity of} \seq
    \\
     & =
    (\eta \tensor \id[n]) \seq \mu
     &
    \text{commutativity of } \mu
    \\
     & =
    \id[n]
     &
    \text{left unitality of } \mu
\end{align*}

This is already far more verbose than the string diagram proof, but the term
notation also blocks the insight required to make a proof step, which is often
much easier to see in the string diagrammatic representation.