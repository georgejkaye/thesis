\section{Categories}

Terms are purely syntax, so two terms are only equal if they are constructed in
precisely the same way.
As we have already seen, this is far too strong a relation; there may be
many terms that, while constructed in different ways, look the same when drawn
out as a diagram modulo the tiling.
We need a way to discard the tile boundaries and work just with
wires and generators.

To identify the terms that describe the same process, we need to impose some
equations on terms.
There is an obvious question: what are these equations?

\begin{example}
    Consider the term \(f \seq \id[n]\), which can be read as `run \(f\) and
    then do nothing' and is drawn as \(
    \iltikzfig{strings/category/identity-l-lhs-tiles}[dom=m,cod=n]
    \).
    Clearly this is the same \(
    \iltikzfig{strings/category/f-tile}[dom=m,cod=n]
    \) but with the left wire elongated a bit.
    So one equation we need is \(
    \iltikzfig{strings/category/identity-l-lhs-tiles}[dom=m,cod=n]
    =
    \iltikzfig{strings/category/f-tile}[dom=m,cod=n]
    \).
\end{example}

We could continue like this, thinking up the `right' equations, but this is a
very ad-hoc way of working.
It turns out that all the work has actually already been done before us, in the
form of \emph{symmetric monoidal categories}.

We start by defining what a \emph{category} is.

\begin{definition}[Category]
    \label{def:category}
    A \emph{category} \(\mcc\) consists of a class of \emph{objects}
    \(\ob{\mcc}\); a class of \emph{morphisms} \(\mor{\mcc}{A}{B}\)
    for every pair of objects \(A, B \in \ob{\mcc}\); and a \emph{composition}
    operation \(
    \morph{
        {-} \circ {=}
    }{
        \mor{\mcc}{B}{C} \times \mor{\mcc}{A}{B}
    }{
        \mor{\mcc}{A}{C}
    }
    \) such that
    \begin{itemize}
        \item composition is \emph{unital}: for every \(
              A \in \ob{\mcc}
              \) there exists an \emph{identity morphism} \(
              \id[A] \in \mor{\mcc}{A}{A}
              \) satisfying \(
              f \circ \id[A] = f = \id[B] \circ f
              \) for any \(
              f \in \mor{\mcc}{A}{B}
              \); and
        \item composition is \emph{associative}: for any morphisms \(
              f \in \mor{\mcc}{A}{B}
              \), \(
              g \in \mor{\mcc}{B}{C}
              \) and \(h \in \mor{\mcc}{C}{D}\), \(
              (h \circ g) \circ f = h \circ (g \circ f).
              \)
    \end{itemize}
\end{definition}

A morphism \(f \in \mor{\mcc}{A}{B}\) is also called an \emph{arrow}, and will
often be written \(\morph{f}{A}{B}\) accordingly.
The subscripts on the object and morphism classes are also often omitted.

\begin{remark}
    The definition of a category uses \emph{classes} rather than sets as one
    might expect; this is due to size issues and Russell's paradox regarding
    the impossibility of the `set of all sets'.
    Later on we will encounter categories where the class of objects really is
    too big to be encapsulated in a set, such as the category of categories.
\end{remark}

By treating terms as morphisms, it is clear to see how they they slip into the
categorical setting.
When discussing terms in the previous section it was more intutiive to use
composition `left-to-right' rather than the `right-to-left' composition
\(\circ\).

\begin{notation}
    \emph{Diagrammatic order} composition is written as
    \(f \seq g \coloneqq g \circ f\).
\end{notation}

\input{sections/categories/floats/c-equations}

The equations of categories are illustrated with string diagram notation
in~\cref{fig:c-equations}.
With these equations in play, we can drop the tile boundaries around terms
comprised only of generators, identities and sequential composition.
However, this only helps with one-dimensional diagrams; how do we deal with
\emph{parallel} composition?
To do this we will require some more structure on our categories.

\subsection{Commutative diagrams}

Equations in category theory can be expressed using \emph{commutative diagrams}.
For example, the unitality and associativity of composition can be illustrated
as follows:

\begin{center}
    \includestandalone{figures/category/coherences/unitality}
    \quad
    \includestandalone{figures/category/coherences/associativity}
\end{center}

We say that the above two diagrams \emph{commute} precisely because \(
\id[B] \circ f = f = f \circ \id[A]
\) and \((h \circ g) \circ f = h \circ (g \circ f)\): no matter which path one
takes, the results are equal.

\subsection{Examples of categories}

Categories generalise a plethora of mathematical structures: some examples will
now be provided.

\begin{example}[Preorder]
    A \emph{preorder} is a binary relation \(\leq\) on a set \(X\) which is
    reflexive and transitive.
    Any preorder generates a category \(\mcc_\leq\): the objects are the
    elements of \(X\) and \(\mcc_\leq(x, y)\) contains exactly one morphism if
    \(x \leq y\) and none otherwise.
\end{example}

\begin{example}[Sets]
    The category \(\set\) has sets as objects and functions as morphisms.
    Composition is then just function composition.
    Compare this with the category \(\rel\), which has sets as objects and
    \emph{relations} as morphisms.
    There is also a category \(\finset\) containing only the \emph{finite} sets
    and functions between them.
\end{example}

\begin{example}[Posets]
    A \emph{partial order} on a set \(A\) is a reflexive, antisymmetric and
    transitive relation \({\leq} \subseteq A \times B\).
    A set equipped with a partial order is called a
    \emph{partially ordered set}, or \emph{poset} for short.
    For posets \((A,{\leq_A})\) and \((B,{\leq_B})\), a function
    \(\morph{f}{A}{B}\) is called \emph{monotone} if \(a \leq_A a^\prime\)
    implies that \(f(a) \leq_B f(a^\prime)\).

    Much like how sets form a category, posets form the category \(\pos\), where
    \(\ob{\pos}\) are sets and \(\mor{\pos}{X}{Y}\) are the monotone functions
    \(X \to Y\).
\end{example}

\begin{example}[Monoids]
    A \emph{monoid} is a tuple \((A, *, \bullet)\) where \(A\) is a set called
    the \emph{carrier}, \(\morph{*}{A \times A}{A}\) is a binary operation
    called the \emph{multiplication}, and \(\bullet \in A\) is an element called
    the \emph{unit}, such that \(a * \bullet = a = \bullet * a\) for any
    \(a \in A\).
    A \emph{monoid homomorphism} between two monoids \((A, *, e_A)\) and
    \((B, +, e_B)\) is a map \(\morph{h}{A}{B}\) such that
    \(h(a * a^\prime) = h(a) + h(a^\prime)\) and \(h(e_A) = e_B\).
    There is a category \(\mon\) with the objects as monoids and morphisms as
    their homomorphisms.
\end{example}

\begin{example}[Product category]
    Given two categories \(\mcc\) and \(\mcd\), their \emph{product category}
    \(\mcc \times \mcd\) is the category with objects are defined as \(
    \ob{(\mcc \times \mcd)} \coloneqq \ob{\mcc} \times \ob{\mcd}
    \) and the morphisms as \[
        \mor{(\mcc \times \mcd)}{(A, A^\prime)}{(B, B^\prime)}
        \coloneqq
        \{
        (f, f^\prime)
        \,|\,
        f \in \mor{\mcc}{A}{B},
        f^\prime \in \mor{\mcd}{A^\prime}{B^\prime}
        \}
    \]
\end{example}

\subsection{Properties of objects and morphisms}

As we have established, the whole point of category theory is to \emph{abstract}
away from concrete settings.
This means that rather than proving results about specific objects and
morphisms, we can often reuse results about particular \emph{properties} they
may have.

\begin{definition}[Initial object]
    An object \(C\) in a category \(\mcc\) is \emph{initial} if, for any other
    object \(X \in \mcc\) there exists a unique morphism \(C \to X\), the
    so-called `absurd function'.
\end{definition}

\begin{example}
    In \(\set\), the initial object is the empty set \(\emptyset\), as there is
    a unique function from \(\emptyset\) to any set \(X\).
\end{example}

Most notions in category also have a \emph{dual} variant, in which all the
arrows are flipped.

\begin{definition}[Terminal object]
    An object \(C\) in a category \(\mcc\) is \emph{terminal} if, for any other
    object \(X \in \mcd\) there exists a unique morphism \(X \to C\).
\end{definition}

\begin{example}
    In \(\set\), the terminal object is the singleton set \(\{\star\}\):
    from any set \(X\) there is a unique function \(X \to \{\star\}\); namely
    the function with action \(x \mapsto \star\).
\end{example}

There are also some properties of morphisms that we will make use of.

\begin{definition}[Monomorphism]
    A morphism \(\morph{f}{A}{B} \in \mcc\) is called a \emph{monomorphism} (or
    simply \emph{mono} for short) if for any two morphisms
    \(\morph{g_1,g_2}{C}{A}\), if \(f \circ g_1 = f \circ g_2\), then
    \(g_1 = g_2\).
\end{definition}

One can think of monomorphisms as morphisms which are \emph{left-cancellative}.
There is also a way to describe \emph{invertible} morphisms.

\begin{definition}[Isomorphism]
    A morphism \(\morph{f}{A}{B} \in \mcc\) is called an \emph{isomorphism} (or
    simply \emph{iso} for short) if there also exists a morphism \(
    \morph{\inverse{f}}{B}{A} \in \mcc
    \) such that \(
    \inverse{f} \circ f = \id[A]
    \) and \(
    f \circ \inverse{f} = \id[B]
    \).
\end{definition}

\begin{example}
    In \(\set\), the monomorphisms are the injective functions and the
    isomorphisms are the bijective functions.
\end{example}

\subsection{Universal constructions}

One of the core ideas in category theory is that of a \emph{universal property}:
a unique morphism that shows that a certain candidate construction is indeed the
`best' way to describe something.
If something satisfies a universal property, then we know that we can safely
apply the relevant results without worrying about the precise construction.

\begin{definition}[Product]
    Given a category \(\mcc\) and objects \(A,B \in \mcc\), their \emph{product}
    is an object \(A \times B\) equipped with a pair of morphisms
    \(\morph{p_0}{A \times B}{A}\) and \(\morph{p_1}{A \times B}{B}\) called
    \emph{projections} such that for every other object \(Z\) with pair of
    morphisms \(\morph{f}{Z}{A}\) and \(\morph{g}{Z}{B}\), there exists a unique
    morphism \(\morph{u}{Z}{A \times B}\) such that the following diagram
    commutes:
    \begin{center}
        \includestandalone{figures/category/diagrams/product}
    \end{center}
    A category \(\mcc\) is said to \emph{have products} if the product exists
    for all pairs of objects \(A,B \in \mcc\).
\end{definition}

\begin{example}
    The product is \(\set\) is the Cartesian product.
\end{example}

As usual, there is the dual notion to consider.

\begin{definition}[Coproduct]
    Given a category \(\mcc\) and objects \(A,B \in \mcc\), their \emph{coproduct}
    is an object \(A + B\) equipped with a pair of morphisms
    \(\morph{i_0}{A}{A + B}\) and \(\morph{i_1}{B}{A + B}\) called
    \emph{injections} such that for every other object \(Z\) with pair of
    morphisms \(\morph{f}{A}{B}\) and \(\morph{g}{B}{Z}\), there exists a unique
    morphism \(\morph{u}{A + B}{Z}\) such that the following diagram
    commutes:
    \begin{center}
        \includestandalone{figures/category/diagrams/coproduct}
    \end{center}
    A category \(\mcc\) is said to \emph{have coproducts} if the coproduct
    exists for all pairs of objects \(A,B \in \mcc\).
\end{definition}

\begin{example}
    The coproduct in \(\set\) is the disjoint union.
\end{example}

Finally, we will look at a useful construction concerning \emph{pairs} of
morphisms with a common domain.

\begin{definition}[Pushout]
    Given morphisms \(\morph{f}{A}{B}\) and \(\morph{g}{A}{C}\), a
    \emph{pushout} is an object \(D\) and a pair of morphisms
    \(\morph{h}{B}{D}\) and \(\morph{k}{C}{D}\) such that for any other pair of
    morphisms \(\morph{h^\prime}{B}{Z}\) and \(\morph{k^\prime}{C}{Z}\) there
    exists a unique morphism \(\morph{u}{D}{Z}\), i.e.\ the following diagram
    commutes:
    \begin{center}
        \includestandalone{figures/category/diagrams/pushout}
    \end{center}
    A category \(\mcc\) is said to \emph{have pushouts} if a pushout exists for
    any pair of morphisms.
\end{definition}

A pushout square is normally indicated with a \raisebox{-0.25em}{\(\ulcorner\)}
symbol as shown above.

\begin{example}
    \(\set\) has pushouts: given morphisms \(\morph{f}{X}{Y}\) and
    \(\morph{g}{X}{Z}\), the pushout is the union of \(Y\) and \(Z\) identifying
    elements with a common preimage in \(X\).
    Concretely, let \({\sim} \subseteq Y \cup Z\) be a relation defined as
    \(\{(y, z) \,|\, \exists x \in X.\, y = f(x) \wedge z = g(x)\}\).
    Then the pushout set \(U\) is defined as \(X \cup Y / \sim\) and the
    morphisms \(\morph{h}{Y}{U}\) and \(\morph{k}{Z}{U}\) to the appropriate
    elements.
\end{example}

Using universal properties means we do not need to restrict ourselves to a
concrete category when using or proving results; we can instead say, for
example, that the result holds in all categories with products.
It is also often the case that if a category satisfies some universal
properties, then others follow for free!
We demonstrate this with a well-known result.

\begin{lemma}
    \label{lem:coproducts-pushout}
    If a category \(\mcc\) has pushouts and an initial object, then \(\mcc\)
    also has coproducts.
\end{lemma}
\begin{proof}
    Given objects \(A,B \in \mcc\), the coproduct \(A + B\) is constructed as
    follows:
    \begin{gather*}
        \includestandalone{figures/category/diagrams/coproduct-pushout}%
    \end{gather*}
    This is a coproduct due to the universal property of pushouts.
\end{proof}

Pushouts have a dual construction, known as a \emph{pullback}.

\begin{definition}[Pullback]
    Given morphisms \(\morph{f}{B}{A}\) and \(\morph{g}{C}{A}\), a
    \emph{pullback} is an object \(D\) and a pair of morphisms
    \(\morph{h}{D}{B}\) and \(\morph{k}{D}{C}\) such that for any other pair of
    morphisms \(\morph{h^\prime}{Z}{B}\) and \(\morph{k^\prime}{Z}{C}\) there
    exists a unique morphism \(\morph{u}{Z}{D}\), i.e.\ the following diagram
    commutes:
    \begin{center}
        \includestandalone{figures/category/diagrams/pullback}
    \end{center}
    A category \(\mcc\) is said to \emph{have pullbacks} if a pullback exists
    for any pair of morphisms.
\end{definition}

Pushouts and pullbacks are essential for performing \emph{graph rewriting}
categorically, which will be explored in the second part of this thesis.