\section{Hypergraphs}

We will begin by defining the categories of hypergraphs required, following the
pattern detailed in \cite{bonchi2022string}.
Hypergraphs are formally defined as a functor category.

\begin{definition}[Hypergraph~\cite{bonchi2016rewriting}]
    Let \(\mathbf{X}\) be the category with object set
    \((\nat \times \nat) + \star\) and morphisms
    \(\morph{\sources{i}}{(k,l)}{\star}\) for each \(i < k\)
    and \(\morph{\targets{j}}{(k,l)}{\star}\) for each \(j < l\).
    The category of hypergraphs \(\hyp\) is the functor category
    \([\mathbf{X}, \set]\).
\end{definition}

One can think of the category \(\mathbf{X}\) as a `template' for the structure
of a hypergraph: the object \(\star\) represents the nodes and each object
\((k, l)\) represents hyperedges with \(k\) sources and \(l\) targets; each such
edge must pick \(k\) sources and \(l\) targets from \(\star\).

Objects in \(\hyp\) are functors that instantiates each object in \(\mathbf{X}\)
to a concrete set.
Subsequently, for a hypergraph \(F \in \hyp\) we write \(\vertices{F}\) for its
set of nodes and \(\edges{F}{k}{l}\) for the set of edges with \(k\) sources and
\(l\) targets.

\begin{example}\label{ex:hypergraph}
    We define the hypergraph \(F\) as follows:
    \begin{gather*}
        \vertices{F} := \{v_0,v_1,v_2,v_3,v_4,v_5\}
        \quad
        \edges{F}{2}{1} := \{e_0,e_2\}
        \quad
        \edges{F}{1}{2} := \{e_1\}
        \\
        \sources{0}(e_0) := v_0
        \quad
        \sources{1}(e_0) := v_2
        \quad
        \sources{0}(e_1) := v_3
        \quad
        \sources{0}(e_2) := v_3
        \quad
        \sources{1}(e_2) := v_2
        \\
        \targets{0}(e_0) := v_3
        \quad
        \targets{0}(e_1) := v_5
        \quad
        \targets{1}(e_1) := v_4
        \quad
        \targets{0}(e_2) := v_4
    \end{gather*}
    Much like with regular graphs, it is much more intuitive to draw out hypergraphs
    rather than look at their combinatorial representation.
    We draw nodes as black dots, and hyperedges as `bubbles' with ordered tentacles
    on the left and right that connect to source and target nodes respectively.

    The hypergraph \(F\) from \cref{ex:hypergraph} is drawn as follows:
    \[
        \iltikzfig{graphs/blank-example}
    \]
    Note that the vertices themselves do not have any notion of ordering or
    directionality.
\end{example}

Since it is a functor category, the morphisms in \(\hyp\) are natural
transformations: structure-preserving maps between hypergraphs.

\begin{definition}[Hypergraph homomorphism]
    Given two hypergraphs \(F, G \in \hyp\), \emph{hypergraph homomorphism}
    \(F \to G\) consists of functions
    \(\morph{\vertices{f}}{\vertices{F}}{\vertices{G}}\) and
    \(\morph{\edges{f}{k}{l}}{\edges{F}{k}{l}}{\edges{G}{k}{l}}\) such that the
    following diagrams commute:
    \input{floats/hypergraph-homs}
\end{definition}

\subsection{Labelled hypergraphs}

The graphical notation is particularly evocative of string diagrams: generators
correspond to hyperedges and wires to the nodes between them.
However, the hyperedges are currently not \emph{labelled} with generator
symbols.
To do this, we must first translate the notion of signature to hypergraphs.

\begin{definition}[Hypergraph signature~\cite{bonchi2016rewriting}]
    For a set of generators \(\signature\) and colours \(\mcc\) as defined
    in \cref{def:generators}, the corresponding \emph{hypergraph signature}
    \(\hypsignature{(\mcc,\Sigma)}\) in an object of \(\hyp\) defined as
    follows:
    \begin{gather*}
        \vertices{\hypsignature{(\mcc,\Sigma)}} \coloneqq \{ v_c \,|\, c \in \mcc\}
        \quad
        \edges{\hypsignature{(\mcc,\Sigma)}}{k}{l} \coloneqq \{ e_g \,|\, g \in \signature\}
        \\
        \sources{i}(e_g) \coloneqq v_{\dom[e_g](i)}
        \quad
        \targets{j}(e_g) \coloneqq v_{\cod[e_g](j)}
    \end{gather*}
\end{definition}


\begin{example}\label{ex:labelled-hypergraph}
    Let \(\mcc \coloneqq \{\bullet,\redbullet\}\) be a set of colours and
    \(\Sigma = \{\morph{\phi}{\redbullet\bullet}{\redbullet}, \morph{\psi}{\redbullet}{\bullet\bullet}\}\) be a monoidal
    signature.
    The corresponding monoidal signature \(\hypsignature{(\mcc,\Sigma)}\) is
    \begin{gather*}
        \vertices{\hypsignature{(\mcc,\Sigma)}} := \{v_{\bullet},v_{\redbullet}\}
        \quad
        \edges{\hypsignature{(\mcc,\Sigma)}}{2}{1} := \{e_\phi\}
        \quad
        \edges{\hypsignature{(\mcc,\Sigma)}}{1}{2} := \{e_\psi\}
        \\
        \sources{0}(e_\phi) := v_{\redbullet}
        \quad
        \sources{1}(e_\phi) := v_{\bullet}
        \quad
        \sources{0}(e_\psi) := v_{\redbullet}
        \quad
        \targets{0}(e_\phi) := v_{\redbullet}
        \quad
        \targets{0}(e_\psi) := v_{\bullet}
        \quad
        \targets{1}(e_\psi) := v_{\redbullet}
    \end{gather*}
    and is drawn as follows, where we notate the vertices and edges with the
    appropriate colour and label to aid in clarity.
    \[
        \iltikzfig{graphs/signature-example-coloured}
    \]
\end{example}

The vertices and edges of a hypergraph \(F\) can then be assigned colours from
\(\mcc\) and symbols from \(\Sigma\) using a homomorphism
\(F \to \hypsignature{\Sigma,\mcc}\).
To do this to \emph{all} the hypergraphs in \(\hyp\) and create a category of
\emph{labelled} hypergraphs, we make use of some more categorical machinery.

\begin{definition}[Slice category~\cite{lawvere1963functorial}]
    For a category \(\mcc\) and an object \(C \in \mcc\), the
    \emph{slice category} \(\mcc \slice C\) has objects the morphisms of
    \(\mcc\) with target \(C\) and morphisms
    \((\morph{f}{X}{C}) \to (\morph{g}{X^\prime}{C})\) the morphisms
    \(\morph{g}{X}{X^\prime} \in \mcc\) such that \(f^\prime\circ g = f\).
\end{definition}

Each object in a slice category \(\mcc \slice C\) is a morphism with \(C\) as
its target.
when we set \(C\) to some hypergraph signature, this is a perfect setting for
labelled hypergraphs.

\begin{definition}[Labelled hypergraphs~\cite{bonchi2016rewriting}]
    Let \(\hypsigmac\) be the category of hypergraphs labelled over a set of
    generators \(\Sigma\) and colours \(\mcc\), defined as the slice category
    \(\hyp \slice \hypsignature{(\Sigma, \mcc)}\).
\end{definition}

\begin{example}
    Recall the hypergraph \(F\) from \autoref{ex:hypergraph}; one labelling
    \(\morph{\Gamma}{F}{\hypsignature{\Sigma}}\) could be defined as
    \begin{gather*}
        \Gamma(-) := v_0
        \quad
        \Gamma(e_0) := e_\phi
        \quad
        \Gamma(e_1) := e_\psi
        \quad
        \Gamma(e_2) := e_\phi
    \end{gather*}
    We simply call the morphism \(\Gamma\) a \emph{labelled hypergraph} and
    draw it as a regular hypergraph but with labelled edges.
    \[
        \iltikzfig{graphs/blank-example-labelled-coloured}
    \]
    Note that if there are multiple generators with the same arity and coarity
    in a signature, there may well be multiple valid labellings of a hypergraph.
\end{example}