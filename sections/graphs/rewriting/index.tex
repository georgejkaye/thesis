\chapter{Graph rewriting}

The results of the previous chapter have given us a combinatorial setting in
which string diagrams equal by topological deformations or by the equations of
commutative comonoids are translated into isomorphic cospans of hypergraphs.
This already gives us a straightforward way to interpret these structures
computationally.

However, it is very rare that we will only be working modulo the equations of
traced comonoids; the equations of some \emph{monoidal theory} will also be in
play.
Since an equation \(
\iltikzfig{strings/category/f}[box=f,colour=white]
=
\iltikzfig{strings/category/f}[box=g,colour=white]
\) may actually change the components of the term, there is no reason for the
interpretations \(
\termandfrobtohypsigmac[
    \tracedandcomonoidtofrobsigmac[
        \iltikzfig{strings/category/f}[box=f,colour=white]
    ]
]
\) and \(
\termandfrobtohypsigmac[
    \tracedandcomonoidtofrobsigmac[
        \iltikzfig{strings/category/f}[box=g,colour=white]
    ]
]
\) to be isomorphic.
Instead, to reason about cospans of hypergraphs modulo the equations of some
monoidal theory the graphs must be \emph{rewritten}.

Traditional term rewriting is inherently one-dimensional, which can be somewhat
restrictive as it enforces that each generator must have a coarity of \(1\).
On the other hand, string diagrams are an example of \emph{higher dimensional}
rewriting, which its roots in Burroni's work on
polygraphs~\cite{burroni1993higherdimensional}.
This higher-dimensional approach briefly entered the world of digital
circuits in Lafont's work on Boolean circuits~\cite{lafont2003algebraic}, which
used a rudimentary form of graphical syntactic rewriting.
However, in this approach even the axioms of SMCs needed to be applied
explicitly, greatly hampering the tractability of the system.

It is only more recently that rewriting string diagrams modulo the axioms of
SMCs using \emph{graph rewriting} has been studied, starting with the
aforementioned \emph{string graphs} of Dixon and
Kissinger~\cite{dixon2010open,kissinger2012pictures,dixon2013opengraphs}.
This only considered rewriting in the presence of a trace rather than
considering any additional structure, but nevertheless was successfully
implemented in a proof assistant called
Quantomatic~\cite{kissinger2015quantomatic}.
Our work continues to follow that of Bonchi et
al~\cite{bonchi2022string,bonchi2022stringa}, which has several advantages
over string graphs.
Unlike string graphs, the category of hypergraphs is
\emph{adhesive}~\cite{lack2004adhesive} which affords it some nice rewriting
properties.
Moreover, rewriting modulo Frobenius structure (or even just monoid or comonoid
structure) can reveal `hidden' rewrites that may not be seen with the naked eye.
In this chapter, we will explore how to extend this work to the traced and
traced comonoid case.

\begin{remark}
    The content of this section is a revised version
    of~\cite[Sec. 5]{ghica2023rewriting}.
\end{remark}

\input{sections/graphs/rewriting/dpo}
\input{sections/graphs/rewriting/complements}
\input{sections/graphs/rewriting/trace}
\input{sections/graphs/rewriting/comonoid}